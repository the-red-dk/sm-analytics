{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\nasync function http(path, options = {}) {\n  const token = localStorage.getItem('authToken');\n  const res = await fetch(`${API_BASE}${path}`, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && {\n        Authorization: `Bearer ${token}`\n      }),\n      ...(options.headers || {})\n    },\n    ...options\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n\n    // If we get \"Invalid token\", clear it and don't retry with auth\n    if (res.status === 401 && text.includes('Invalid token')) {\n      console.warn('âš ï¸ Invalid token detected, clearing from localStorage');\n      localStorage.removeItem('authToken');\n\n      // Retry the request without the token\n      if (token) {\n        console.log('ðŸ”„ Retrying request without authentication...');\n        return http(path, options);\n      }\n    }\n    throw new Error(text || res.statusText);\n  }\n  return res.json();\n}\nexport const AuthApi = {\n  login: credentials => http('/api/auth/login', {\n    method: 'POST',\n    body: JSON.stringify(credentials)\n  }),\n  register: userData => http('/api/auth/register', {\n    method: 'POST',\n    body: JSON.stringify(userData)\n  })\n};\nexport const UsersApi = {\n  getAllUsers: (params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/users?${query}`);\n  },\n  getUsers: (params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/users?${query}`);\n  },\n  getUser: id => http(`/api/users/${id}`),\n  createUser: data => http('/api/users', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  updateUser: (id, data) => http(`/api/users/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(data)\n  }),\n  deleteUser: id => http(`/api/users/${id}`, {\n    method: 'DELETE'\n  })\n};\nexport const PostsApi = {\n  getAllPosts: (params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/posts?${query}`);\n  },\n  getPosts: (params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/posts?${query}`);\n  },\n  getPostsByUser: (userId, params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/posts/user/${userId}?${query}`);\n  },\n  createPost: data => http('/api/posts', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  updatePost: (id, data) => http(`/api/posts/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(data)\n  }),\n  deletePost: id => http(`/api/posts/${id}`, {\n    method: 'DELETE'\n  })\n};\nexport const LikesApi = {\n  likePost: postId => http(`/api/likes/post/${postId}`, {\n    method: 'POST'\n  }),\n  unlikePost: postId => http(`/api/likes/post/${postId}`, {\n    method: 'DELETE'\n  }),\n  getPostLikes: postId => http(`/api/likes/post/${postId}`)\n};\nexport const FollowersApi = {\n  followUser: userId => http(`/api/followers/${userId}`, {\n    method: 'POST'\n  }),\n  unfollowUser: userId => http(`/api/followers/${userId}`, {\n    method: 'DELETE'\n  }),\n  getFollowers: userId => http(`/api/followers/followers/${userId}`),\n  getFollowing: userId => http(`/api/followers/following/${userId}`)\n};\nexport const CommentsApi = {\n  getPostComments: (postId, params = {}) => {\n    const query = new URLSearchParams(params).toString();\n    return http(`/api/comments/post/${postId}?${query}`);\n  },\n  createComment: (postId, data) => http(`/api/comments/post/${postId}`, {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  deleteComment: id => http(`/api/comments/${id}`, {\n    method: 'DELETE'\n  })\n};\nexport const AnalyticsApi = {\n  getSummary: () => http('/api/analytics/summary'),\n  getEngagement: () => http('/api/analytics/engagement'),\n  getContentPerformance: () => http('/api/analytics/content-performance'),\n  getUserGrowth: () => http('/api/analytics/user-growth')\n};\nexport default {\n  AuthApi,\n  UsersApi,\n  PostsApi,\n  LikesApi,\n  FollowersApi,\n  CommentsApi,\n  AnalyticsApi\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","http","path","options","token","localStorage","getItem","res","fetch","headers","Authorization","ok","text","catch","status","includes","console","warn","removeItem","log","Error","statusText","json","AuthApi","login","credentials","method","body","JSON","stringify","register","userData","UsersApi","getAllUsers","params","query","URLSearchParams","toString","getUsers","getUser","id","createUser","data","updateUser","deleteUser","PostsApi","getAllPosts","getPosts","getPostsByUser","userId","createPost","updatePost","deletePost","LikesApi","likePost","postId","unlikePost","getPostLikes","FollowersApi","followUser","unfollowUser","getFollowers","getFollowing","CommentsApi","getPostComments","createComment","deleteComment","AnalyticsApi","getSummary","getEngagement","getContentPerformance","getUserGrowth"],"sources":["D:/sm-analytics/src/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\r\n\r\nasync function http(path, options = {}) {\r\n  const token = localStorage.getItem('authToken');\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    headers: { \r\n      'Content-Type': 'application/json', \r\n      ...(token && { Authorization: `Bearer ${token}` }),\r\n      ...(options.headers || {}) \r\n    },\r\n    ...options,\r\n  });\r\n  if (!res.ok) {\r\n    const text = await res.text().catch(() => '');\r\n    \r\n    // If we get \"Invalid token\", clear it and don't retry with auth\r\n    if (res.status === 401 && text.includes('Invalid token')) {\r\n      console.warn('âš ï¸ Invalid token detected, clearing from localStorage');\r\n      localStorage.removeItem('authToken');\r\n      \r\n      // Retry the request without the token\r\n      if (token) {\r\n        console.log('ðŸ”„ Retrying request without authentication...');\r\n        return http(path, options);\r\n      }\r\n    }\r\n    \r\n    throw new Error(text || res.statusText);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport const AuthApi = {\r\n  login: (credentials) => http('/api/auth/login', {\r\n    method: 'POST',\r\n    body: JSON.stringify(credentials)\r\n  }),\r\n  register: (userData) => http('/api/auth/register', {\r\n    method: 'POST',\r\n    body: JSON.stringify(userData)\r\n  })\r\n};\r\n\r\nexport const UsersApi = {\r\n  getAllUsers: (params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/users?${query}`);\r\n  },\r\n  getUsers: (params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/users?${query}`);\r\n  },\r\n  getUser: (id) => http(`/api/users/${id}`),\r\n  createUser: (data) => http('/api/users', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data)\r\n  }),\r\n  updateUser: (id, data) => http(`/api/users/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data)\r\n  }),\r\n  deleteUser: (id) => http(`/api/users/${id}`, { method: 'DELETE' })\r\n};\r\n\r\nexport const PostsApi = {\r\n  getAllPosts: (params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/posts?${query}`);\r\n  },\r\n  getPosts: (params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/posts?${query}`);\r\n  },\r\n  getPostsByUser: (userId, params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/posts/user/${userId}?${query}`);\r\n  },\r\n  createPost: (data) => http('/api/posts', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data)\r\n  }),\r\n  updatePost: (id, data) => http(`/api/posts/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data)\r\n  }),\r\n  deletePost: (id) => http(`/api/posts/${id}`, { method: 'DELETE' })\r\n};\r\n\r\nexport const LikesApi = {\r\n  likePost: (postId) => http(`/api/likes/post/${postId}`, { method: 'POST' }),\r\n  unlikePost: (postId) => http(`/api/likes/post/${postId}`, { method: 'DELETE' }),\r\n  getPostLikes: (postId) => http(`/api/likes/post/${postId}`)\r\n};\r\n\r\nexport const FollowersApi = {\r\n  followUser: (userId) => http(`/api/followers/${userId}`, { method: 'POST' }),\r\n  unfollowUser: (userId) => http(`/api/followers/${userId}`, { method: 'DELETE' }),\r\n  getFollowers: (userId) => http(`/api/followers/followers/${userId}`),\r\n  getFollowing: (userId) => http(`/api/followers/following/${userId}`)\r\n};\r\n\r\nexport const CommentsApi = {\r\n  getPostComments: (postId, params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return http(`/api/comments/post/${postId}?${query}`);\r\n  },\r\n  createComment: (postId, data) => http(`/api/comments/post/${postId}`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(data)\r\n  }),\r\n  deleteComment: (id) => http(`/api/comments/${id}`, { method: 'DELETE' })\r\n};\r\n\r\nexport const AnalyticsApi = {\r\n  getSummary: () => http('/api/analytics/summary'),\r\n  getEngagement: () => http('/api/analytics/engagement'),\r\n  getContentPerformance: () => http('/api/analytics/content-performance'),\r\n  getUserGrowth: () => http('/api/analytics/user-growth'),\r\n};\r\n\r\nexport default { AuthApi, UsersApi, PostsApi, LikesApi, FollowersApi, CommentsApi, AnalyticsApi };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}